---
title: 常见问题
outline: deep
---

# 常见问题

::: danger

此页面需重写

:::

汇总在部署、升级或二次开发 higan-hz 时最常见的疑问及解决方案。

## 常规使用问题

### 主题启用后样式错乱怎么办？

1. 确认所有静态资源都以 200 正常返回。可以在浏览器 DevTools → Network 中筛选 `theme` 或 `.css`。
2. 若使用了 CDN 或代理缓存，请刷新缓存；首次启用建议执行浏览器强制刷新 (`Ctrl + F5`)。
3. 检查 Halo 日志是否提示写入失败。主题需要将构建产物解压到 `data/templates/themes/howiehz-higan`，如果权限不足会导致文件缺失。

### 自定义字体不生效？

- 上传字体后务必点击“保存”，并等待 Halo 刷新静态资源。
- 如果填写了字体名称，请确保值与字体文件内部的 `Full name` 或 `PostScript Name` 保持一致。使用错误的名称会导致浏览器回退到系统字体。
- 检查浏览器 Network 面板是否成功加载 `.woff2`/`.ttf` 文件。

### 已启用多语言菜单但未生效？

- 确认 `全局 → 多语言菜单支持` 以及 `全局 → 默认页面语言` 的值是否正确。
- 菜单顶级条目必须与语言代码完全一致，例如 `zh_CN` 或 `en`，空格或大小写不一致都会导致匹配失败。
- 如果启用了“浏览器语言自动跳转”，请确保目标语言的菜单和内容都已配置，否则可能导致空白页面。
- 可在控制台执行 `navigator.language` 查看当前浏览器语言。

### 分享按钮点击无反应？

- 检查分享链接中是否使用了 `@URL`、`@TITLE` 占位符，如果缺失会导致拼接后的 URL 无效。
- “Native”分享仅在支持 Web Share API 的浏览器中可用（大多数移动端浏览器均支持）。
- 若你在 HTTPS 站点中调用 HTTP 分享接口（例如旧版 QQ 分享），部分浏览器可能拦截。建议改用 HTTPS 接口或通过二维码方式分享。

### 如何添加额外的社交平台？

1. 在 `社交资料/RSS → 设定自定义资料` 中新增一条自定义记录（填写 `识别码`、`链接`、`图标`、`aria-label`）。
2. 在“首页社交资料展示”列表中添加“自定义资料”，并将 `值` 填成上一步的 `识别码`。
3. 图标统一使用 [Iconify](https://icon-sets.iconify.design/) 名称，确保 Halo 已开启外部图标加载。

### 菜单如何指向指定标签或分类页面？

- 在菜单中添加“自定义链接”，并根据模板映射表填写路径，例如标签归档 `/tags/<标签-slug>/`、分类归档 `/categories/<分类-slug>/`。
- 更多页面（如标签列表、分类列表、归档页）的路径可在[模板文件与访问路径映射](/reference/template-map)中查询。
- 保存修改后刷新前台确认结果。

## 内容展示与功能

### 推荐文章/字数统计没有数据？

- 推荐文章功能依赖分类：如果文章没有任何分类或分类中仅存在一篇文章，则不会显示。
- 字数统计、预计阅读时间建议搭配 `plugin-extra-api`，否则将使用内置估算，可能与实际值有偏差。

### 文章目录未显示或错位？

- 检查文章中是否存在两个以上的标题（至少到 H2）。
- 如果启用了“自定义侧边目录最大宽度”，过小的宽度可能导致目录紧贴右侧，可适当增大。
- Markdown 解析后的标题若包含特殊字符（如 HTML 标签），Halo 可能不会生成 ID，建议使用纯文本标题。

### 错误页面重定向不想生效？

- 在 `错误页样式 → 页面自动重定向` 取消勾选即可。
- 若希望延长等待时间，可将“跳转等待时间”调整为更大的数值。

## 配置与安全

### 如何重置主题设置？

- 进入 Halo 后台主题设置，点击右上角的 **重置**（若当前版本 Halo 支持）。
- 或者在服务器上删除 `data/templates/themes/howiehz-higan/settings.yaml` 中的配置，重新上传主题。
- 推荐先导出设置备份，以免误删。

### 启用“仅允许使用指定域名访问”后跳转异常？

- 检查白名单与目标链接是否都使用 **正确的 Base64 编码**。可以在浏览器控制台执行 `atob('编码值')` 验证是否与预期一致。
- 若启用了“保留路径和查询参数”，请确保目标链接以 `/` 结尾或支持追加路径。

## 开发与调试

### 开发模式下如何快速验证样式？

- 运行 `pnpm dev`。该命令会同时监听 Stylus、Tailwind 与 Vite 模块，生成的文件位于 `tmp/styles/` 与 `dist/`。
- 如果只需调试文档站点，可以运行 `pnpm docs:dev`。
- 若修改了模板（`src/templates`），请刷新浏览器或执行一次 `pnpm build` 以清理旧产物。

---

如问题仍未解决，可前往 [GitHub Issues](https://github.com/HowieHz/halo-theme-higan-hz/issues) 搜索或提交新的反馈，或加入 QQ 群 `694413711` 获取社区支持。
