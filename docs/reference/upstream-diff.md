---
title: 与上游主题的差异
outline: deep
---

# 与上游主题的差异

::: danger

此页面需重写

:::

higan-hz 基于 guqing 的 halo-theme-higan 最新开发版持续演进。本页对照原主题梳理所有关键改动，包含样式修复、不可配置增强、后台配置项新增/调优以及对开发者透明的工程优化，方便你评估升级成本或定位特性来源。

> 上游参考版本：`guqing/halo-theme-higan` 最新开发版（对比历史可参见 [commit 列表](https://github.com/guqing/halo-theme-higan/commits/main/)）。

## 样式修复

- 移除导航栏文字前多余空白（上游 issue #113）。
- 使用 PostCSS + Tailwind 重构整体样式，修复上游未正确引入的样式 class。
- 文章页平板模式下恢复“回到顶部”按钮显示。
- 文章页平板模式下菜单按钮联动折叠导航。
- 文章页桌面模式下，隐藏顶部导航栏不再遮挡页面按钮（higan-hz issue #89）。
- 修复分享按钮获取错误链接的问题。
- 修复一级标题未出现在目录中的问题。

## 不可配置的新增样式/交互

- 文章顶部分享栏新增 QQ 空间按钮，Twitter 链接改为 X。
- 友链页面允许在描述中使用 HTML。
- 非文章页移动端、文章页移动端与桌面、平板模式下的导航栏及回到顶部按钮添加进出场动画。

## 配置项新增与调整

主题设置被重新划分为「全局」「总体样式」「首页样式」「文章页样式」「分类集合页样式」「分类详情页样式」「标签集合页样式」「标签详情页样式」「作者详情页样式」「归档页样式」「自定义页面样式」「相册页样式」「瞬间页样式」「社交资料 / RSS」「自定义分享按钮」「错误页样式」等分组。以下概览列举每个分组的新增能力（部分摘录，完整字段说明请参阅《[站点配置基础](../guide/essentials/site-configuration.md)》）：

### 全局

- 默认页面语言（支持 URL `?lang=` 切换）。
- 多语言前缀匹配、浏览器语言自动跳转、多语言菜单支持。
- CSP `upgrade-insecure-requests`、仅允许指定域名访问、镜像站跳转设置。
- 自定义资源地址、instant.page 与 Mermaid 支持开关及依赖配置。

### 总体样式

- 自定义字体上传与字体名称映射。
- 扩展配色方案（新增“跟随系统”与多套浅/深色预设）。
- 自定义配色编辑与识别码绑定，浅/深/自动模式切换按钮、浏览器记忆设置。
- 内容区域最大/最小宽度、宽度属性等排版控制。
- 页眉头像/菜单/随机文章、页脚统计信息、版权、主题信息、底部内容（含多语言）等全面开关。
- 标题/段落边距倍率、引用块、表格底线、`blockquote` 引号、`h3` 下划线等细粒度排版开关。

### 首页样式

- 覆盖主页 HTML 标题，一言与自定义随机句子并行显示。
- 多语言公告栏、隐藏社交文案及列表标题。
- 主页列表布局三选（简洁、多元、瞬间）并提供阅读量、标签、字数、封面等独立开关。
- 置顶图标位置选择、瞬间列表条数/头像昵称等配置。

### 文章页样式

- 段落空行优化、首行缩进与缩进值。
- 发布/更新时间显示、左侧提示文案、阅读量、预计阅读时间、字数。
- 分享按钮位置、目录最大宽度、末尾分隔线。
- 点赞按钮（宽高、对齐、统计）与推荐文章数量。
- 上一篇/下一篇导航、评论区、移动端底部导航及分享按钮开关。

### 其他列表/详情页

- 分类/标签/作者详情页可显示阅读量与 RSS 按钮。
- 分类集合页可显示文章数量并自定义括号字符，多层分类开关。
- 标签集合页新增排序方式选择与数量字符。
- 归档页按年月折叠及动画时长。

### 自定义页面 / 相册 / 瞬间

- 自定义页面继承文章页排版选项，支持启用类文章页布局、评论区、阅读时间、字数。
- 相册页圆角、渐入动画、瀑布流列数与间距、鼠标事件钩子。
- 瞬间页阅读时间、字数、点赞、评论开关。

### 社交资料 / 分享按钮 / 错误页

- 社交资料可混合预设平台、纯文本、自定义平台，新增 BiliBili、Reddit、Stack Overflow、YouTube、豆瓣、网易云音乐、知乎等。
- RSS 展示位置移动至社交面板，可自定义地址。
- 分享按钮支持 QQ、微信二维码、QQ 空间、豆瓣、微博、Telegram、浏览器原生分享等。
- 错误页支持自动重定向、倒计时、目标链接与延迟配置。

### 元数据扩展

- 文章/分类/标签/页面新增页面标题与页面语言字段；文章可设置是否在列表中展示。

### 既有选项的重命名/调整

- 配色名称更新（如“暗黑”更名为“暗色 - 绿”）。
- 首页个人简介输入框高度调整至 150px。

## 插件与生态适配

- 扩展官方插件兼容性：links、photos、moments、feed、comment-widget、search-widget、highlightjs、lightgallery、Mermaid、extra-api 等。
- 提供二维码分享页面 `public/assets/qrcode.html`。
- 新增分享按钮位置与模板片段以配合插件输出。

更多插件使用说明详见《[进阶功能](../guide/advanced/#可选插件与配置建议)》与《[内容写作与增强](../guide/essentials/content-authoring.md)#mermaid-与代码块》。

## 工程与内部优化

- 主题样式切换基于 HTML `theme` 属性（替代原 `body` class）。
- 移除冗余样式和资源，减小最终打包体积。
- 更新仓库元数据和链接，避免与原主题冲突。
- 标签样式支持在多个页面复用颜色标识；分类支持面包屑显示。

---

如需查看具体字段默认值或操作步骤，请结合本页与《配置总览》《快速开始》《进阶功能》等章节阅读。
